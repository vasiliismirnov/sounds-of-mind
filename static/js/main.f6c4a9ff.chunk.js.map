{"version":3,"sources":["control-panel/ControlPanel.js","actions/ControlPanelActions.js","sequencer/Sequencer.js","actions/SequencerActions.js","editor/Editor.js","header/Header.js","App.js","serviceWorker.js","initialData.js","reducers/bars.js","reducers/barSize.js","reducers/tempo.js","sounds-engine/SoundsEngine.js","reducers/playback.js","reducers/index.js","index.js"],"names":["connect","store","bars","tempo","isPlaying","playback","dispatch","changeTempo","type","payload","playSequence","beats","notes","stopSequence","sequence","_ref","react_default","a","createElement","className","onClick","e","reduce","aggregatedBeats","bar","concat","disabled","id","min","max","step","defaultValue","onChange","target","value","barSize","switchNoteItem","beatId","noteValue","addBarItem","removeBarItem","barId","resetTrack","headerCell","key","barHeaderItems","beatHeaderItems","map","index","colSpan","onRemoveBarClick","beat","getColumns","beatClassName","values","includes","onNoteItemClick","rows","title","item","Editor","src_control_panel_ControlPanel","src_sequencer_Sequencer","Header","href","Component","App","src_header_Header","src_editor_Editor","Boolean","window","location","hostname","match","track","uuidv4","state","arguments","length","undefined","action","_action$payload","beatToUpdateIndex","barToUpdateIndex","findIndex","updatedBeats","slice","find","Object","objectSpread","filter","toConsumableArray","switchNoteHandler","beatsToAdd","i","push","barToAdd","addBar","removeBar","SAMPLER","Tone","Sampler","C3","process","D3","E3","G3","A3","release","toMaster","NOTE_SIZE","NOTE_MEASURE","START_DELAY","play","events","note","Time","partToPlay","Part","time","chord","triggerAttackRelease","start","loop","loopEnd","Transport","bpm","stop","combineReducers","initialState","createStore","rootReducer","ReactDOM","render","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f6c4a9ff.chunk.js","sourcesContent":["import React from 'react';\r\nimport { changeTempo, playSequence, stopSequence } from '../actions/ControlPanelActions';\r\nimport { connect } from 'react-redux';\r\nimport './ControlPanel.css';\r\n\r\nconst ControlPanel = ({ bars, tempo, isPlaying, changeTempo, playSequence, stopSequence }) => {\r\n\r\n  const onPlayBtnClick = e => {\r\n    const beats = bars.reduce((aggregatedBeats, bar) =>\r\n      aggregatedBeats.concat(bar.beats), []);\r\n    playSequence(beats, tempo);\r\n  }\r\n\r\n  const onStopBtnClick = e => {\r\n    stopSequence();\r\n  }\r\n\r\n  const onTempoChanged = e => {\r\n    changeTempo(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"row control-panel-container\">\r\n      <div className=\"col-4 control-panel-item\">\r\n        <h4 className=\"header\">Playback</h4>\r\n        <div className=\"body\">\r\n          <div className=\"tool-panel-item\">\r\n            <button type=\"button\" className=\"btn\" onClick={onPlayBtnClick} disabled={isPlaying}>\r\n              <i className=\"fas fa-play\"></i>\r\n            </button>\r\n            <button type=\"button\" className=\"btn\" onClick={onStopBtnClick} disabled={!isPlaying}>\r\n              <i className=\"fas fa-stop\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"col-4 control-panel-item\">\r\n        <h4 className=\"header\">Controls</h4>\r\n        <div className=\"body\">\r\n          <p className=\"time-signature\">Time signature: 4/4</p>\r\n          <p className=\"tempo\">Tempo: {tempo} bpm</p>\r\n          <input id=\"tempoRange\" type=\"range\" className=\"custom-range\" min=\"60\" max=\"360\" step=\"30\"  \r\n            defaultValue={tempo} onChange={onTempoChanged} disabled={isPlaying}/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n  return {\r\n    bars: store.bars,\r\n    tempo: store.tempo,\r\n    isPlaying: store.playback.isPlaying,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    changeTempo: tempo => dispatch(changeTempo(tempo)),\r\n    playSequence: (beats, tempo) => dispatch(playSequence(beats, tempo)),\r\n    stopSequence: () => dispatch(stopSequence()),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlPanel);","export function changeTempo(tempo) {\r\n  return {\r\n    type: 'CHANGE_TEMPO',\r\n    payload: tempo\r\n  }\r\n}\r\n\r\nexport function playSequence(notes, tempo) {\r\n  return {\r\n    type: 'PLAY_SEQUENCE',\r\n    payload: {notes: notes, tempo: tempo}\r\n  }\r\n}\r\n\r\nexport function stopSequence(sequence) {\r\n  return {\r\n    type: 'STOP_SEQUENCE',\r\n    payload: sequence\r\n  }\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { switchNoteItem, addBarItem, removeBarItem, resetTrack } from '../actions/SequencerActions';\r\nimport './Sequencer.css';\r\n\r\nconst Sequencer = ({ barSize, bars, isPlaying, switchNoteItem, addBarItem, removeBarItem, resetTrack }) => {\r\n  if (!bars) {\r\n    return;\r\n  }\r\n\r\n  const noteItems = [\r\n    { value: 'C3', title: 'C' },\r\n    { value: 'D3', title: 'D' },\r\n    { value: 'E3', title: 'E' },\r\n    { value: 'G3', title: 'G' },\r\n    { value: 'A3', title: 'A' },\r\n  ];\r\n\r\n  const headerCell = <th key=\"0\" className=\"sequencer-roll-cell note-value-header\"></th>;\r\n\r\n  let barHeaderItems = [headerCell];\r\n  let beatHeaderItems = [headerCell];\r\n  const beats = bars.reduce((aggregatedBeats, bar) => aggregatedBeats.concat(bar.beats), []);\r\n\r\n  barHeaderItems = barHeaderItems.concat(bars.map((bar, index) => (\r\n    <th key={bar.barId} colSpan={barSize} className=\"sequencer-roll-cell bar-header-item\">\r\n      {index + 1}\r\n      <i className=\"fas fa-minus-circle remove-icon\" onClick={() => onRemoveBarClick(bar.barId)}></i>\r\n    </th>\r\n  )));\r\n\r\n  beatHeaderItems = beatHeaderItems.concat(beats.map((beat, index) =>\r\n    <th key={beat.beatId} className=\"sequencer-roll-cell beat-header\">{index + 1}</th>));\r\n\r\n  const onNoteItemClick = (beatId, noteValue) => {\r\n    switchNoteItem(beatId, noteValue);\r\n  }\r\n\r\n  const onAddBarClick = () => {\r\n    addBarItem(barSize);\r\n  }\r\n\r\n  const onRemoveBarClick = (barId) => {\r\n    removeBarItem(barId);\r\n  }\r\n\r\n  const onResetTrackClick = () => {\r\n    resetTrack();\r\n  }\r\n\r\n  const getColumns = (noteValue) => beats.map((beat) => {\r\n    const isNoteActive = beat.values.includes(noteValue);\r\n    const beatClassName = 'sequencer-roll-cell ' + (isNoteActive ? 'active-note' : 'inactive-note');\r\n    return (\r\n      <td key={beat.beatId} onClick={() => onNoteItemClick(beat.beatId, noteValue)} className={beatClassName}></td>\r\n    );\r\n  });\r\n\r\n  const rows = noteItems.map((item, index) => (\r\n    <tr key={item.value}>\r\n      <th className=\"sequencer-roll-cell note-value-header\">{item.title}</th>\r\n      {getColumns(item.value)}\r\n    </tr>\r\n  ));\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"sequencer-container col\">\r\n        <h4 className=\"title\">Sequence</h4>\r\n        <div className=\"body\">\r\n          <div className=\"add-bar-item\">\r\n            <button type=\"button\" className=\"btn\" onClick={() => onAddBarClick()} disabled={isPlaying}>\r\n              <i className=\"fas fa-plus-circle\"></i> Add bar\r\n            </button>\r\n            <button type=\"button\" className=\"btn\" onClick={() => onResetTrackClick()} disabled={isPlaying}>\r\n              <i className=\"fas fa-times-circle\"></i> Reset\r\n            </button>\r\n          </div>\r\n          <div className=\"sequencer-roll\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  {barHeaderItems}\r\n                </tr>\r\n                <tr>\r\n                  {beatHeaderItems}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {rows}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = store => {\r\n  return {\r\n    bars: store.bars,\r\n    barSize: store.barSize,\r\n    isPlaying: store.playback.isPlaying,\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    switchNoteItem: (beatId, noteValue) => dispatch(switchNoteItem(beatId, noteValue)),\r\n    addBarItem: (barSize) => dispatch(addBarItem(barSize)),\r\n    removeBarItem: (barId) => dispatch(removeBarItem(barId)),\r\n    resetTrack: () => dispatch(resetTrack()),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sequencer);","export function switchNoteItem(beatId, noteValue) {\r\n  return {\r\n    type: 'SWITCH_NOTE',\r\n    payload: {\r\n      beatId: beatId,\r\n      noteValue: noteValue\r\n    }\r\n  }\r\n};\r\n\r\nexport function addBarItem(barSize) {\r\n  return {\r\n    type: 'ADD_BAR',\r\n    payload: barSize\r\n  }\r\n};\r\n\r\nexport function removeBarItem(barId) {\r\n  return {\r\n    type: 'REMOVE_BAR',\r\n    payload: barId\r\n  }\r\n};\r\n\r\nexport function resetTrack() {\r\n  return {\r\n    type: 'RESET_TRACK',\r\n    payload: null\r\n  }\r\n};","import React from 'react';\r\nimport './Editor.css';\r\nimport ControlPanel from '../control-panel/ControlPanel';\r\nimport Sequencer from '../sequencer/Sequencer';\r\n\r\nconst Editor = () => {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col container\">\r\n        <ControlPanel></ControlPanel>\r\n        <Sequencer></Sequencer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Editor;","import React, { Component } from 'react';\r\nimport './Header.css';\r\n\r\nclass Header extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"app-header row\">\r\n        <nav className=\"col\">\r\n          <a className=\"app-header-title\" href=\"/\">Sounds of Mind</a>\r\n        </nav>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Editor from './editor/Editor';\r\nimport Header from './header/Header';\r\n\r\nclass App extends Component {\r\n\r\n    render() {\r\n      return (\r\n        <div className=\"\">\r\n          <Header></Header>\r\n\r\n          <Editor></Editor>\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import uuidv4 from 'uuid/v4';\r\n\r\n/**\r\n * Track Bars map.\r\n * Bar is object like:\r\n * {\r\n *     barId: BAR_ID,                   // unique identifier of the bar\r\n *     barSize: 4,                      // size of thebar (how much beats in the bar)\r\n *     beats: [                         // array with beats\r\n *         { \r\n *             beatId: BEAT_ID,     // unique identifier of the beat\r\n *             values: ['A3', 'C3']     // list of the note values in the beat\r\n *         }\r\n *     ]\r\n * }\r\n */\r\nexport const track = {\r\n  bars: [\r\n    {\r\n      barId: uuidv4(),\r\n      beats: [\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []}\r\n      ]\r\n    },\r\n    {\r\n      barId: uuidv4(),\r\n      beats: [\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []}\r\n      ]\r\n    },\r\n    {\r\n      barId: uuidv4(),\r\n      beats: [\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []}\r\n      ]\r\n    },\r\n    {\r\n      barId: uuidv4(),\r\n      beats: [\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []},\r\n        { beatId: uuidv4(), values: []}\r\n      ]\r\n    }\r\n  ],\r\n  barSize: 4,\r\n  tempo: 120,\r\n  playback: {\r\n    sequence: null,\r\n    isPlaying: false\r\n  }\r\n};","import uuidv4 from 'uuid/v4';\r\nimport { track } from '../initialData';\r\n\r\nconst switchNoteHandler = (state, beatId, noteValue) => {\r\n  let beatToUpdateIndex = -1;\r\n  const barToUpdateIndex = state.findIndex(bar => {\r\n    beatToUpdateIndex = bar.beats.findIndex(beat => beat.beatId === beatId);\r\n    return (beatToUpdateIndex !== -1) ? true : false;\r\n  });\r\n\r\n  if (barToUpdateIndex !== -1 && beatToUpdateIndex !== -1) {\r\n    const resultState = state.slice();\r\n    const barToUpdate = resultState[barToUpdateIndex];\r\n\r\n    const updatedBeats = barToUpdate.beats.map((beat, index) => {\r\n      if (index !== beatToUpdateIndex) {\r\n        return beat;\r\n      }\r\n\r\n      const value = beat.values.find(value => value === noteValue);\r\n      if (value) {\r\n        // remove value if it was in beat\r\n        return { ...beat, values: beat.values.filter(value => value !== noteValue) };\r\n      } else {\r\n        // add value if it was not in beat\r\n        return { ...beat, values: [...beat.values, noteValue] };\r\n      }\r\n    });\r\n\r\n    return state.map((bar, index) =>\r\n      index === barToUpdateIndex ?\r\n        { ...bar, beats: updatedBeats } :\r\n        bar\r\n    );\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nconst addBar = (state, barSize) => {\r\n  const beatsToAdd = [];\r\n\r\n  for (let i = 0; i < barSize; i++) {\r\n    beatsToAdd.push({ beatId: uuidv4(), values: [] });\r\n  }\r\n\r\n  const barToAdd = {\r\n    barId: uuidv4(),\r\n    beats: beatsToAdd\r\n  }\r\n\r\n  return [...state, barToAdd];\r\n}\r\n\r\nconst removeBar = (state, barId) => {\r\n  return state.filter(bar => bar.barId !== barId);\r\n}\r\n\r\nconst resetTrack = (state) => {\r\n  return track.bars;\r\n}\r\n\r\nconst bars = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'SWITCH_NOTE':\r\n      const { beatId, noteValue } = action.payload;\r\n      return switchNoteHandler(state, beatId, noteValue);\r\n    case 'ADD_BAR':\r\n      const barSize = action.payload;\r\n      return addBar(state, barSize);\r\n    case 'REMOVE_BAR':\r\n      const barId = action.payload;\r\n      return removeBar(state, barId);\r\n    case 'RESET_TRACK':\r\n      return resetTrack(state);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default bars;","const barSize = (state = 1, action) => {\r\n    return state\r\n}\r\n\r\nexport default barSize;","const tempo = (state = 120, action) => {\r\n    switch (action.type) {\r\n        case 'CHANGE_TEMPO':\r\n          const tempoValue = action.payload;\r\n          return tempoValue;\r\n        default:\r\n          return state;\r\n    }\r\n}\r\n\r\nexport default tempo;","import Tone from 'tone';\r\n\r\nconst SAMPLES = {\r\n  'C3': process.env.PUBLIC_URL + '/samples/tank/C.mp3',\r\n  'D3': process.env.PUBLIC_URL + '/samples/tank/D.mp3',\r\n  'E3': process.env.PUBLIC_URL + '/samples/tank/E.mp3',\r\n  'G3': process.env.PUBLIC_URL + '/samples/tank/G.mp3',\r\n  'A3': process.env.PUBLIC_URL + '/samples/tank/A.mp3',\r\n};\r\n\r\nconst SAMPLER = new Tone.Sampler(SAMPLES, {'release' : 1}).toMaster();\r\nconst NOTE_SIZE = 4;\r\nconst NOTE_MEASURE = `${NOTE_SIZE}n`;\r\nconst START_DELAY = \"+0.1\";  // +0.1 to try to avoid Tone.js notes missing (https://github.com/Tonejs/Tone.js/issues/425).\r\n\r\nexport function playSequence(notes, tempo) {\r\n  const events = notes.map((note, index) => [index * Tone.Time(NOTE_MEASURE), note]);\r\n\r\n  const partToPlay = new Tone.Part(function(time, chord) {\r\n    if (chord.length > 0) {\r\n      SAMPLER.triggerAttackRelease(chord, NOTE_MEASURE, time);\r\n    }\r\n  }, events).start(START_DELAY);\r\n\r\n  partToPlay.loop = true;\r\n  partToPlay.loopEnd = `${notes.length / NOTE_SIZE}m`;\r\n\r\n  Tone.Transport.bpm.value = tempo;\r\n  Tone.Transport.start(START_DELAY);\r\n\r\n  return partToPlay;\r\n};\r\n\r\nexport function stopSequence(partToPlay) {\r\n  partToPlay.stop();\r\n\r\n  Tone.Transport.stop();\r\n};","import { playSequence, stopSequence } from '../sounds-engine/SoundsEngine';\r\n\r\nconst play = (notes, tempo) => {\r\n  const noteValues = notes.map(note => note.values);\r\n  return playSequence(noteValues, tempo);\r\n};\r\n\r\nconst stop = (sequence) => {\r\n  stopSequence(sequence);\r\n};\r\n\r\nconst playback = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'PLAY_SEQUENCE':\r\n      const {notes, tempo} = action.payload;\r\n      const sequence = play(notes, tempo);\r\n      return {sequence: sequence, isPlaying: true};\r\n    case 'STOP_SEQUENCE':\r\n      stop(state.sequence);\r\n      return {sequence: null, isPlaying: false};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default playback;","import { combineReducers } from 'redux';\r\nimport bars from './bars';\r\nimport barSize from './barSize';\r\nimport tempo from './tempo';\r\nimport playback from './playback';\r\n\r\nexport default combineReducers({\r\n    bars,\r\n    barSize,\r\n    tempo,\r\n    playback\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport '@fortawesome/fontawesome-free/css/all.min.css';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './reducers';\r\nimport { track } from './initialData';\r\n\r\nconst initialState = track;\r\nconst store = createStore(rootReducer, initialState);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root'));\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}